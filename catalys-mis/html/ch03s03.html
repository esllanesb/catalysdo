
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title xmlns:d="http://docbook.org/ns/docbook">Catalys MIS User Guide &#151; 3.3.&nbsp;Management Information Server API</title><link rel="stylesheet" type="text/css" href="../resources/docbook.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Catalys MIS User Guide"><link rel="up" href="ch03.html" title="Chapter&nbsp;3.&nbsp;Configuration And Maintenance"><link rel="prev" href="ch03s02.html" title="3.2.&nbsp;Maintenance"><link rel="next" href="ch04.html" title="Chapter&nbsp;4.&nbsp;Dashboard Web Interface"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:d="http://docbook.org/ns/docbook" class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="ch03s02.html">Prev</a>&nbsp;</td><th width="60%" align="center"><div id="navheader_chapter_title">Chapter&nbsp;3.&nbsp;Configuration And Maintenance</div><div><a accesskey="h" href="index.html">Home</a></div></th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch04.html">Next</a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a name="mis_API"></a>3.3.&nbsp;Management Information Server API</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mis_API-JMX_API"></a>3.3.1.&nbsp;JMX API</h3></div></div></div><p>
      The MIS JMX API uses only open MBeans to avoid introducing any binary dependency between the management console
      and manageable applications.
    </p><p>
      JMX is a self-descriptive management technology. Each MBean exposes its metadata, which fully describes its
      management API.
    </p><p>
      For more details on JMX, please refer to the
      <a href="http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html" target="_top">JMX Technology Home Page</a>.
    </p><p>
      To look at the MIS JMX API, start the MIS and connect a jconsole to it as described in section
      <a href="ch03s02.html#mis_maintenance-mbeans" title="3.2.2.&nbsp;Browse CameronTec MBeans">Browsing CameronTec MBeans</a>.
    </p><p>
      For example, any
      <a href="ch03.html#mis_configuration-script-configuration" title="3.1.3.&nbsp;Script Configuration">scripts</a>
      added to the
      <span class="emphasis"><em>scripts</em></span>
      directory of the MIS installation are published as attributes of the
      <code class="code">MA.Scripts</code>
      MBean. The results of these scripts can be used to generate events in the MIS by
      configuring an interest that inspects the MBean. The
      <span class="emphasis"><em>freespace</em></span>
      script that is provided with
      the MIS installation is one such application, the results of which can be utilized by configuring a numeric gauge
      interest in the MIS.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="operations_monitoring-jmx-server"></a>3.3.2.&nbsp;JMX authentication</h3></div></div></div><p>
      JMX connections can be configured to be authenticated before they exchange data. To enable the authentication, changes 
      would have to be done for both the client side and the server side. Catalys Node acts as a client when connecting to
      LMA and as a server when connecting to jconsole or any other jmx client. Credentials properties file would have to be 
      specified on the client side. Whereas, on the server side, access and password files will have to be specified.
    </p><p>
      For catalys node instance to act as a jmx server, two environment variables will have to be created. Firstly, 
      <span class="emphasis"><em>JMX_REMOTE_X_ACCESS_FILE</em></span>, which specifies the absolute location of the jmx access file 
      and secondly, <span class="emphasis"><em>JMX_REMOTE_X_PASSWORD_FILE</em></span> which specifies the absolute location of the
      jmx password file. 
      For instance, environment variables can be the following:
      For access file:
      </p><pre class="programlisting">
        JMX_REMOTE_X_ACCESS_FILE=C:\Itiviti\Catalys\Node\resources\jmxremote.access
      </pre><p>
      For password file:
      </p><pre class="programlisting">
        JMX_REMOTE_X_PASSWORD_FILE=C:\Itiviti\Catalys\Node\resources\jmxremote.password
      </pre><p>
      
      The password file should have restrictive permissions. Only the owning user should have access to this file.
      JMX access file contains the usernames and their corresponding access levels (readwrite is required for proper
      operations) and JMX password file should contain the usernames and their corresponding passwords.
      For example, 
      </p><p>
        JMX access file can contain the following:
      </p><p>
      </p><p>
      <span class="bold"><strong>        
		username readwrite
      </strong></span>
      </p><p>
	  (where username is the user for which the access level is to be set. readwrite defines access level 
	    to be granted to the user)
	  
      </p><p>
        And JMX password file can contain the following entry:
      </p><p>
      </p><p>
       <span class="bold"><strong>          
	     username username_password
       </strong></span>
     </p><p>
	 (where username is the user against which the JMX authentication will be done
       and username_password is the password of this user)
    </p><p>
      For Catalys Node instance to act as a jmx client, <span class="emphasis"><em>JMX_CLIENT_CREDENTIALS_FILE</em></span> environment variable 
      will have to be set. The value of this variable is the absolute path of the credentials properties file.
      For instance, the environment variable can be the following:
      </p><pre class="programlisting">
         JMX_CLIENT_CREDENTIALS_FILE=C:\Catalys\windows\jmxHostsCredentials.properties
      </pre><p>
    </p><p>
      Credentials property file should be defined in below format :
      </p><p>
        <span class="bold"><strong> localhost=username:password</strong></span>
      </p><p>
     (where localhost is a hostname of the device where we are accessing the jmx server.
     And username:password is the username and password of the user which will be used to connect to the jmx server.
     Alternative delimiters permitted to be used in the java properties files can also be used)
   
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mis_API-eventCustomAction"></a>3.3.3.&nbsp;Custom Escalation Actions</h3></div></div></div><p>
      Custom Actions for Events Processing must implement the
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/IAction.html" target="_top">IAction</a>
      interface OR derive from the
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/AbstractAction.html" target="_top">AbstractAction</a>
      class.
    </p><p>The custom action must have an empty constructor.</p><p>
      If extending the
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/AbstractAction.html" target="_top">AbstractAction</a>
      class, the custom action needs to implement 4 methods:
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
        Implement
        <code class="code">getSupportedPropertyNames()</code>
        to return a Set of supported property names for the custom
        action.
      </li><li class="listitem">
        Implement
        <code class="code">getMandatoryPropertyNames()</code>
        to return a Set of mandatory property names for the custom
        action.
      </li><li class="listitem">
        Implement
        <code class="code">initialize()</code>
        to validate the properties of this action, once they have been set by the
        user via the Dashboard.
      </li><li class="listitem">
        Implement
        <code class="code">executeAction()</code>
        to perform the desired custom action. This method takes an
        <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/ActionSourceEvent.html" target="_top">ActionSourceEvent</a>
        from which all of the available
        <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/events/IEvent.html" target="_top">Event</a>
        information can be retrieved, such as the host, node, session, and interest name.
      </li></ul></div><p>
      Extending the
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/AbstractAction.html" target="_top">AbstractAction</a>
      class, grants access to the logging sub-system via the
      <code class="code">getLogger()</code>
      method.
    </p><p>The following code snippet demonstrates this:</p><pre class="programlisting">package com.cameronclient.event.action;

//Required to extend AbstractAction and implement IAction
public class MyCustomAction extends AbstractAction {

  //Required empty constructor
  public MyCustomAction() {
    //empty
  }

  @Override
  public Set getSupportedPropertyNames() {
    // Should return a Set of supported property names  .
  }

  @Override
  public Set getMandatoryPropertyNames() {
    // Should return a Set of mandatory property names  .
  }

  @Override
  public void initialize() {
    // Should validate all the properties set on this action.
  }

  // Override the executeAction() method and handle the event in a custom way.
  // The event message, timestamp and interest are available to you.
  @Override
  public Object executeAction(ActionSourceEvent actionSourceEvent) throws Exception {
    System.out.println("onEventMessage = " +
      this.getActionProperties().get("onEventMessage"));
    System.out.println("event time stamp = " +
      actionSourceEvent.getEvent().getEventProperties().get("eventDateTimeStamp "));
    System.out.println("interestName = " +
      actionSourceEvent.getEvent().getEventProperties().get("interestName "));

    return null;
  }
}</pre><p>Any third party libraries must be on the classpath of the MIS.</p><p>
      To configure the location of the package name where the custom events reside, add the
      <a href="ch03.html#mis_configuration-custom-action-configuration" title="3.1.2.5.3.&nbsp;Custom Action Configuration">
        dashboard.remote-services.remoteEventService/customActionClassBasePackage
      </a>
      property to the
      <span class="emphasis"><em>mis.conf</em></span>
      file. For example:
    </p><pre class="programlisting">&lt;property name="customActionClassBasePackage" value="com.cameronclient"/&gt;</pre><p>
      All classes below this parent that implement
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/IAction.html" target="_top">IAction</a>
      are available for selection in the Dashboard.
    </p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="mis_API-sampleCustomActions"></a>3.3.3.1.&nbsp;Sample Custom Actions</h4></div></div></div><div class="simplesect"><div class="titlepage"><div><div><h5 class="title"><a name="mis_API-customSNMPTrapAction"></a>SNMP Trap Action</h5></div></div></div><p>
          The
          <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/SampleSNMPAction.html" target="_top">SampleSNMPAction</a>
          class is provided as a sample custom action, and can be modified to meet specific client requirements.
        </p><p>
          Full source code of this class is provided with the MIS installation, can be found at
          <span class="emphasis"><em>src/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/SampleSNMPAction.java</em></span>.
        </p><p>
          This class populates an SNMP trap based on a sample MIB, the contents of which are listed in the above
          Javadoc.
        </p><p>
          The sample class derives from
          <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/BaseSNMPAction.html" target="_top">BaseSNMPAction</a>.
          Client actions can derive from this class too, in which case they need to provide implementations for:
        </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/BaseSNMPAction.html#populateV1PDU(org.snmp4j.PDUv1,%20com.camerontec.catalys.mis.eps.events.IEvent)" target="_top">populateV1PDU</a></li><li class="listitem"><a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/BaseSNMPAction.html#populateV2PDU(org.snmp4j.PDU,%20com.camerontec.catalys.mis.eps.events.IEvent)" target="_top">populateV2PDU</a></li></ul></div><p>
          Alternatively, the client action can implement the
          <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/IAction.html" target="_top">IAction</a>
          interface OR derive from the
          <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/eps/escalationpaths/runtime/actions/AbstractAction.html" target="_top">AbstractAction</a>
          class, as described <a href="ch03s03.html#mis_API-eventCustomAction" title="3.3.3.&nbsp;Custom Escalation Actions">above</a>.
        </p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mis_API-Log_Events_Repository_Client"></a>3.3.4.&nbsp;Log Events Repository Client</h3></div></div></div><p>
      The Log Events Repository Client is a Java client API bundled within the MA that enables external applications to
      read from the Log Events Repository.
    </p><p>
      Below is a sample Java program that demonstrates the use of this client API:
    </p><pre class="programlisting">// Create a new repository client
LogEventsRepositoryClient client = new LogEventsRepositoryClient();

// Configure the repository client by specifying the on-disk storage location
client.setStorageLocation("/tmp/data/log-events-repository");

// Now initialize the client. This is the point where configuration-related errors
// will be reported.
client.initialize();

// You are ready to use the client to interact with the repository.
// The code below prints the list of available file loggers to the console.
System.out.printf("Available file loggers:\n");
for (FileLoggerID fileLogger: client.fileLoggers())
{
  System.out.printf("\t%s\n", fileLogger);
}

// Shut down the client when done
client.shutdown();</pre><p>
      In order to build and execute the above client code ensure that the MIS Jar file
      (<span class="emphasis"><em>catalys-mis.jar</em></span>) is on the classpath.
    </p><p>
      For the full documentation of the Log Events Repository Client, please refer to the
      <a class="javadocplain" href="../javadoc/com/camerontec/catalys/mis/ler/client/LogEventsRepositoryClient.html" target="_top">JavaDoc</a>.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="mis_API-customUserProvider"></a>3.3.5.&nbsp;Custom User Provider</h3></div></div></div><p>
      A custom user details provider implements the
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/ums/ICustomUserDetailsProvider.html" target="_top">ICustomUserDetailsProvider</a>
      interface.
    </p><p>This class must have a public no-args constructor.</p><p>
      The method
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/ums/ICustomUserDetailsProvider.html#setProperties(java.util.Properties)" target="_top">setProperties()</a>
      is used by the UMS to inject properties read from the MIS configuration file, as described in the
      <a href="ch03.html#mis_configuration-dashboard-user-details" title="3.1.2.1.5.&nbsp;Dashboard User Details Provider">configuration documentation</a>.
    </p><p>
      The method
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/ums/ICustomUserDetailsProvider.html#setLogger(com.camerontec.util.logger.ILogger)" target="_top">setLogger()</a>
      is used by the UMS to give the custom provider access to a logger.
    </p><p>
      The methods
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/ums/ICustomUserDetailsProvider.html#initialize()" target="_top">initialize()</a>
      and
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/ums/ICustomUserDetailsProvider.html#shutdown()" target="_top">shutdown()</a>
      are invoked by the UMS respectively when starting up and shutting down.
    </p><p>
      This interface extends the
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/ums/IUserDetailsProvider.html" target="_top">IUserDetailsProvider</a>
      interface, whose methods provide the functionality to create, delete, and modify users, and their properties.
    </p><p>
      At minimum, the custom user provider implementation must support the
      <code class="code">admin</code>
      user.
    </p><p>
      For a basic sample implementation, refer to the
      <a class="javadoc" href="../javadoc/com/camerontec/catalys/mis/ums/ldap/SampleLDAPUserDetailsProvider.html" target="_top">SampleLDAPUserDetailsProvider</a>
      class, source code for which can be found in
      <span class="emphasis"><em>src/com/camerontec/catalys/mis/ums/ldap/SampleLDAPUserDetailsProvider.java</em></span>.
    </p></div></div><div xmlns:d="http://docbook.org/ns/docbook" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch03s02.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch03.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch04.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">3.2.&nbsp;Maintenance&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;4.&nbsp;Dashboard Web Interface</td></tr></table></div><div xmlns:d="http://docbook.org/ns/docbook" xmlns:date="http://exslt.org/dates-and-times" id="footer_copyright"><div id="footer_copyright_pubdate">Published 2024-02-22T15:53:33+01:00</div><div id="footer_copyright_copy">
        Copyright &copy; 2024 CameronTec</div></div></body></html>